#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸš€ Running pre-push checks..."

# Run security audit
echo "ğŸ” Running security audit..."
npm audit --audit-level=moderate || {
  echo "âš ï¸  Security vulnerabilities detected (non-blocking)."
}

# Run gas report
echo "â›½ Generating gas report..."
npm run test:gas || {
  echo "âš ï¸  Gas report generation failed (non-blocking)."
}

# Run coverage
echo "ğŸ“Š Checking test coverage..."
npm run coverage || {
  echo "âŒ Coverage check failed. Please ensure adequate test coverage."
  exit 1
}

echo "âœ… All pre-push checks passed!"
